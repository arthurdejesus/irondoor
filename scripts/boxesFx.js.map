{"version":3,"names":[],"mappings":"","sources":["boxesFx.js"],"sourcesContent":["!function(t){\"use strict\";function i(i){var n,e;return\"x\"===i?(n=s.clientWidth,e=t.innerWidth):\"y\"===i&&(n=s.clientHeight,e=t.innerHeight),e>n?e:n}function n(t,i){for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n]);return t}function e(t,i){this.el=t,this.options=n({},this.options),n(this.options,i),this._init()}var s=t.document.documentElement,r={WebkitTransition:\"webkitTransitionEnd\",MozTransition:\"transitionend\",OTransition:\"oTransitionEnd\",msTransition:\"MSTransitionEnd\",transition:\"transitionend\"},a=r[Modernizr.prefixed(\"transition\")],o={transitions:Modernizr.csstransitions},c={width:i(\"x\"),height:i(\"y\")};e.prototype.options={},e.prototype._init=function(){this._setTransforms(),this.effect=this.el.getAttribute(\"data-effect\")||\"effect-1\",this.isAnimating=!1,this.panels=[].slice.call(this.el.querySelectorAll(\".panel\")),this.panelsCount=4,this.current=0,classie.add(this.panels[0],\"current\");var t=this;this.panels.forEach(function(i){for(var n=i.querySelector(\"img\"),e=\"\",s=0;s<t.panelsCount;++s)e+='<div class=\"bg-tile\"><div class=\"bg-img\"><img src=\"'+n.src+'\" /></div></div>';i.removeChild(n),i.innerHTML=e+i.innerHTML}),this.nav=document.createElement(\"nav\"),this.nav.innerHTML='<span class=\"prev\"><i></i></span><span class=\"next\"><i></i></span>',this.el.appendChild(this.nav),this._initEvents()},e.prototype._setTransforms=function(){this.transforms={\"effect-1\":{next:[\"translate3d(0, \"+(c.height/2+10)+\"px, 0)\",\"translate3d(-\"+(c.width/2+10)+\"px, 0, 0)\",\"translate3d(\"+(c.width/2+10)+\"px, 0, 0)\",\"translate3d(0, -\"+(c.height/2+10)+\"px, 0)\"],prev:[\"translate3d(\"+(c.width/2+10)+\"px, 0, 0)\",\"translate3d(0, \"+(c.height/2+10)+\"px, 0)\",\"translate3d(0, -\"+(c.height/2+10)+\"px, 0)\",\"translate3d(-\"+(c.width/2+10)+\"px, 0, 0)\"]}}},e.prototype._initEvents=function(){var i=this,n=this.nav.children;n[0].addEventListener(\"click\",function(){i._navigate(\"prev\")}),n[1].addEventListener(\"click\",function(){i._navigate(\"next\")}),t.addEventListener(\"resize\",function(){i._resizeHandler()})},e.prototype._navigate=function(t){if(this.isAnimating)return!1;this.isAnimating=!0;var i=this,n=this.panels[this.current];\"next\"===t?this.current=this.current<this.panelsCount-1?this.current+1:0:this.current=this.current>0?this.current-1:this.panelsCount-1;var e=this.panels[this.current];classie.add(e,\"active\"),this._applyTransforms(n,t);var s=0,r=function(t){return t&&!classie.has(t.target,\"bg-img\")?!1:(++s,s<i.panelsCount?!1:(o.transitions&&this.removeEventListener(a,r),classie.remove(n,\"current\"),classie.add(e,\"current\"),i._resetTransforms(n),classie.remove(e,\"active\"),void(i.isAnimating=!1)))};o.transitions?n.addEventListener(a,r):r()},e.prototype._applyTransforms=function(t,i){var n=this;[].slice.call(t.querySelectorAll(\"div.bg-img\")).forEach(function(t,e){t.style.WebkitTransform=n.transforms[n.effect][i][e],t.style.transform=n.transforms[n.effect][i][e]})},e.prototype._resetTransforms=function(t){[].slice.call(t.querySelectorAll(\"div.bg-img\")).forEach(function(t){t.style.WebkitTransform=\"none\",t.style.transform=\"none\"})},e.prototype._resizeHandler=function(){function t(){i._resize(),i._resizeTimeout=null}var i=this;this._resizeTimeout&&clearTimeout(this._resizeTimeout),this._resizeTimeout=setTimeout(t,50)},e.prototype._resize=function(){c.width=i(\"x\"),c.height=i(\"y\"),this._setTransforms()},t.BoxesFx=e}(window);"],"file":"boxesFx.js","sourceRoot":"/source/"}